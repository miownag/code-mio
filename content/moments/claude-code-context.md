使用Claude Code时，发现之前读过文件改过一些东西，下一轮再让它二次修改这里的功能，它还是会再读一遍。因此我猜测Claude Code的工具的基本压缩策略类似如下：

- 一个Loop内，保持上下文；
- 跨Loop，只保留之前Loop的长工具内容的摘要。

其实就是和Manus类似的工具摘要优化。

这样是合理的，因为跨Loop有很大概率是另一个任务了，不需要所有信息，如果真需要，再多一轮tool call去读就好了。

并且Claude Code是Coding Agent，在一轮Loop后，代码已经改过，可能被format/lint/用户手动修改过，所以下一轮再读一遍也是合理的。另外发现有时LLM会想直接改文件，Claude Code的 `Edit` 方法还会报错，报错信息显示需要先读再改。

有点一石二鸟的意思。
